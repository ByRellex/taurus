[tox]
envlist =
    py27-qt4
    py27
    py35
    py36
    py37
    py37-docs
    flake8

[testenv]
conda_channels=
    conda-forge
    tango-controls
conda_deps=
    qt4: pyqt=4
    !qt4: pyqt=5
    pytango
    pyepics
    guidata
    py27: cython
    py35: cython
    py36: guiqwt
    py37: guiqwt
    lxml
    future
    pillow
    pint
    ply
    pyqtgraph
    pythonqwt
    numpy
    scipy
    !py35: pymca
    click
    spyder
    pytest
    pytest-xvfb
    docs: sphinx
    docs: sphinx_rtd_theme
    docs: graphviz
deps=
    py27: guiqwt
    py35: guiqwt
commands=
    python -m pytest lib/taurus --show-capture=no

[testenv:py37-docs]
commands=
    sphinx-build -qW doc/source/ build/sphinx/html

[testenv:flake8]
basepython = python
conda_deps=
deps = flake8
commands = flake8 --statistics